import{h as H,i as x,m as L}from"./chunk-5PN6IA72.js";import{Ca as S,Ea as $,Fa as _,Ga as r,Ha as c,I as q,Ia as h,Ja as I,K as m,Ka as k,L as C,Oa as l,Pa as D,Ra as y,S as f,Ta as N,U as g,Ua as U,aa as w,db as J,ea as R,eb as j,fa as v,fb as B,j as E,ka as F,m as O,ta as d,x as T,ya as a}from"./chunk-TBU7BOQM.js";function M(t,e){!e?.injector&&w(M);let s=e?.injector??f(R),n=new E(1),o=B(()=>{let i;try{i=t()}catch(u){j(()=>n.error(u));return}j(()=>n.next(i))},{injector:s,manualCleanup:!0});return s.get(v).onDestroy(()=>{o.destroy(),n.complete()}),n.asObservable()}function P(t,e){let s=!e?.manualCleanup;s&&!e?.injector&&w(P);let n=s?e?.injector?.get(v)??f(v):null,o=z(e?.equal),i;e?.requireSync?i=a({kind:0},{equal:o}):i=a({kind:1,value:e?.initialValue},{equal:o});let u=t.subscribe({next:p=>i.set({kind:1,value:p}),error:p=>{if(e?.rejectErrors)throw p;i.set({kind:2,error:p})}});if(e?.requireSync&&i().kind===0)throw new C(601,!1);return n?.onDestroy(u.unsubscribe.bind(u)),J(()=>{let p=i();switch(p.kind){case 1:return p.value;case 2:throw p.error;case 0:throw new C(601,!1)}},{equal:e?.equal})}function z(t=Object.is){return(e,s)=>e.kind===1&&s.kind===1&&t(e.value,s.value)}var b=class{constructor(){this.userId=0,this.id=0,this.title="",this.body=""}};function G(t,e){t&1&&(r(0,"span"),l(1,"Loading post..."),c())}function K(t,e){if(t&1&&(r(0,"pre"),l(1),N(2,"json"),c()),t&2){let s=k(2);d(),D(U(2,1,s.post()))}}function Q(t,e){if(t&1&&S(0,G,2,0,"span")(1,K,3,3,"pre"),t&2){let s=k();_(s.loading()?0:1)}}function W(t,e){t&1&&(r(0,"pre"),l(1,"Error while fetching post!"),c())}var V=(()=>{let e=class e{constructor(){this.postId=F(1,{alias:"postId"}),this.loading=a(!1),this.error=a(!1),this.http=f(L),this.post$=M(this.postId).pipe(m(()=>{this.loading.set(!0)}),q(n=>this.http.get(`https://jsonplaceholder.typicode.com/posts/${n}`).pipe(m(()=>this.error.set(!1)),m(()=>this.loading.set(!1)),m(o=>this.post.set(o)),T(()=>(console.log("error"),this.error.set(!0),O(new b)))))),this.postObserver=P(this.post$),this.post=a(new b)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=g({type:e,selectors:[["app-post"]],inputs:{postId:[1,"postId"]},standalone:!0,features:[y],decls:6,vars:2,consts:[[1,"badge","bg-primary"]],template:function(o,i){o&1&&(r(0,"h3"),l(1," Current post "),r(2,"span",0),l(3),c()(),S(4,Q,2,1)(5,W,2,0,"pre")),o&2&&(d(3),D(i.postId()),d(),_(i.error()?5:4))},dependencies:[x,H]});let t=e;return t})();var ge=(()=>{let e=class e{constructor(){this.postId=a(1),this.userId=a(0)}nextPost(){this.postId.update(n=>n+1)}prevPost(){this.postId.update(n=>n-1)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=g({type:e,selectors:[["app-posts"]],standalone:!0,features:[y],decls:12,vars:1,consts:[[1,"btn","btn-success","me-3",3,"click"],[1,"btn","btn-success",3,"click"],[1,"container"],[3,"postId"]],template:function(o,i){o&1&&(h(0,"br"),r(1,"h1"),l(2,"Fetching posts using Signals and RxJs"),c(),h(3,"hr"),r(4,"button",0),I("click",function(){return i.prevPost()}),l(5,"Previous post"),c(),r(6,"button",1),I("click",function(){return i.nextPost()}),l(7,"Next post"),c(),h(8,"br")(9,"br"),r(10,"div",2),h(11,"app-post",3),c()),o&2&&(d(11),$("postId",i.postId()))},dependencies:[x,V],styles:[".container[_ngcontent-%COMP%]{border:1px dashed #eee}"]});let t=e;return t})();export{ge as PostsComponent};
